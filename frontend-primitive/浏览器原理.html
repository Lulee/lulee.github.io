<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>浏览器原理 | 阡陌的博客</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/logo.png">
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/assets/css/0.styles.91b054e0.css" as="style"><link rel="preload" href="/assets/js/app.32b47463.js" as="script"><link rel="preload" href="/assets/js/2.5de6ae78.js" as="script"><link rel="preload" href="/assets/js/1.b9497948.js" as="script"><link rel="preload" href="/assets/js/16.e7ad0e37.js" as="script"><link rel="prefetch" href="/assets/js/10.0322e7ef.js"><link rel="prefetch" href="/assets/js/11.12c8c92d.js"><link rel="prefetch" href="/assets/js/12.1a381072.js"><link rel="prefetch" href="/assets/js/13.f9335f9c.js"><link rel="prefetch" href="/assets/js/14.172a24d8.js"><link rel="prefetch" href="/assets/js/15.4df8a0ab.js"><link rel="prefetch" href="/assets/js/17.2c3272c8.js"><link rel="prefetch" href="/assets/js/18.297bbf51.js"><link rel="prefetch" href="/assets/js/19.f649213b.js"><link rel="prefetch" href="/assets/js/20.a02ba8df.js"><link rel="prefetch" href="/assets/js/21.9d60fed0.js"><link rel="prefetch" href="/assets/js/22.293b44d2.js"><link rel="prefetch" href="/assets/js/23.d1ba7c2b.js"><link rel="prefetch" href="/assets/js/24.651f4af9.js"><link rel="prefetch" href="/assets/js/25.cdaa40cc.js"><link rel="prefetch" href="/assets/js/26.d09cf02f.js"><link rel="prefetch" href="/assets/js/27.f5ee3b42.js"><link rel="prefetch" href="/assets/js/28.ae7a5024.js"><link rel="prefetch" href="/assets/js/29.e21a36ad.js"><link rel="prefetch" href="/assets/js/3.f635c279.js"><link rel="prefetch" href="/assets/js/30.fa56bcb6.js"><link rel="prefetch" href="/assets/js/31.b02cd190.js"><link rel="prefetch" href="/assets/js/32.4843970c.js"><link rel="prefetch" href="/assets/js/33.0a1984a4.js"><link rel="prefetch" href="/assets/js/34.b501860c.js"><link rel="prefetch" href="/assets/js/35.f6dc8a86.js"><link rel="prefetch" href="/assets/js/36.8f10d1ce.js"><link rel="prefetch" href="/assets/js/37.04e7d589.js"><link rel="prefetch" href="/assets/js/38.b871bb15.js"><link rel="prefetch" href="/assets/js/39.ce5bafd4.js"><link rel="prefetch" href="/assets/js/4.7c846e4d.js"><link rel="prefetch" href="/assets/js/40.54ce5e18.js"><link rel="prefetch" href="/assets/js/41.4d59dc4d.js"><link rel="prefetch" href="/assets/js/42.bbe2d66c.js"><link rel="prefetch" href="/assets/js/43.9de9b727.js"><link rel="prefetch" href="/assets/js/44.cf6c0f14.js"><link rel="prefetch" href="/assets/js/45.a2c4d953.js"><link rel="prefetch" href="/assets/js/46.cd194676.js"><link rel="prefetch" href="/assets/js/47.897d328e.js"><link rel="prefetch" href="/assets/js/48.6cf37816.js"><link rel="prefetch" href="/assets/js/49.82d353d3.js"><link rel="prefetch" href="/assets/js/5.ff0e74e3.js"><link rel="prefetch" href="/assets/js/6.c729ed87.js"><link rel="prefetch" href="/assets/js/7.701746f6.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.63f43780.js">
    <link rel="stylesheet" href="/assets/css/0.styles.91b054e0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">阡陌的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端知识总结" class="dropdown-title"><span class="title">前端知识总结</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端知识总结" class="mobile-dropdown-title"><span class="title">前端知识总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend-primitive/" class="nav-link router-link-active">
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  Vue.js技术栈
</a></li><li class="dropdown-item"><!----> <a href="/frontend-tools/" class="nav-link">
  工具链
</a></li></ul></div></div><div class="nav-item"><a href="/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习资源" class="dropdown-title"><span class="title">学习资源</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习资源" class="mobile-dropdown-title"><span class="title">学习资源</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/learn-resource/" class="nav-link">
  前端学习路线
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="优秀博客" class="dropdown-title"><span class="title">优秀博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="优秀博客" class="mobile-dropdown-title"><span class="title">优秀博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://coolshell.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  酷壳
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.ruanyifeng.com/home.html/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阮一峰的个人网站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/mqyqingfeng/Blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  冴羽的博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.zhangxinxu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  张鑫旭-鑫空间-鑫生活
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Lulee" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端知识总结" class="dropdown-title"><span class="title">前端知识总结</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端知识总结" class="mobile-dropdown-title"><span class="title">前端知识总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend-primitive/" class="nav-link router-link-active">
  前端基础
</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  Vue.js技术栈
</a></li><li class="dropdown-item"><!----> <a href="/frontend-tools/" class="nav-link">
  工具链
</a></li></ul></div></div><div class="nav-item"><a href="/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习资源" class="dropdown-title"><span class="title">学习资源</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习资源" class="mobile-dropdown-title"><span class="title">学习资源</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/learn-resource/" class="nav-link">
  前端学习路线
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="优秀博客" class="dropdown-title"><span class="title">优秀博客</span> <span class="arrow down"></span></button> <button type="button" aria-label="优秀博客" class="mobile-dropdown-title"><span class="title">优秀博客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://coolshell.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  酷壳
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.ruanyifeng.com/home.html/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阮一峰的个人网站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/mqyqingfeng/Blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  冴羽的博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.zhangxinxu.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  张鑫旭-鑫空间-鑫生活
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Lulee" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/frontend-primitive/网页布局.html" class="sidebar-link">div+css网页布局</a></li><li><a href="/frontend-primitive/ES6学习笔记.html" class="sidebar-link">ES6学习笔记</a></li><li><a href="/frontend-primitive/浏览器原理.html" class="active sidebar-link">浏览器原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-primitive/浏览器原理.html#前置概念" class="sidebar-link">前置概念</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-primitive/浏览器原理.html#cpu-和-gpu" class="sidebar-link">CPU  和 GPU</a></li><li class="sidebar-sub-header"><a href="/frontend-primitive/浏览器原理.html#进程和线程" class="sidebar-link">进程和线程</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontend-primitive/浏览器原理.html#现代浏览器的架构" class="sidebar-link">现代浏览器的架构</a></li><li class="sidebar-sub-header"><a href="/frontend-primitive/浏览器原理.html#浏览器的导航" class="sidebar-link">浏览器的导航</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-primitive/浏览器原理.html#输入处理" class="sidebar-link">输入处理</a></li><li class="sidebar-sub-header"><a href="/frontend-primitive/浏览器原理.html#dns-解析" class="sidebar-link">DNS 解析</a></li><li class="sidebar-sub-header"><a href="/frontend-primitive/浏览器原理.html#网络请求" class="sidebar-link">网络请求</a></li><li class="sidebar-sub-header"><a href="/frontend-primitive/浏览器原理.html#网页渲染流程" class="sidebar-link">网页渲染流程</a></li></ul></li><li class="sidebar-sub-header"><a href="/frontend-primitive/浏览器原理.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/frontend-primitive/DNS和CDN的区别和联系.html" class="sidebar-link">DNS和 CDN 的区别和联系</a></li><li><a href="/frontend-primitive/Web性能优化.html" class="sidebar-link">Web性能优化</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="浏览器原理"><a href="#浏览器原理" class="header-anchor">#</a> 浏览器原理</h1> <h2 id="前置概念"><a href="#前置概念" class="header-anchor">#</a> 前置概念</h2> <h3 id="cpu-和-gpu"><a href="#cpu-和-gpu" class="header-anchor">#</a> CPU  和 GPU</h3> <p>CPU（Central Process Unit），又名中央处理器，相当于电脑的大脑，处理各种计算任务。</p> <p>GPU（Graphic Process Unit）,又名显卡，与CPU不同，GPU擅长处理简单任务，但同时跨多个内核。顾名思义，它最初是为处理图形而开发的。</p> <h3 id="进程和线程"><a href="#进程和线程" class="header-anchor">#</a> 进程和线程</h3> <p>进程(Process)是计算机执行任务的基本单位。线程是更小的调度单位，存于进程中。</p> <p>一个进程至少包含一个线程(Thread)。进程通过 IPC（<strong>I</strong>nter <strong>P</strong>rocess <strong>C</strong>ommunication ） 通信。</p> <h2 id="现代浏览器的架构"><a href="#现代浏览器的架构" class="header-anchor">#</a> 现代浏览器的架构</h2> <p>现代浏览器的架构是多进程架构，下面是 Chrome 的架构图：</p> <p><img src="/assets/img/image-20200920213159058.dfa200cc.png" alt="image-20200920213159058"></p> <table><thead><tr><th style="text-align:left;">进程及其控制</th> <th></th></tr></thead> <tbody><tr><td style="text-align:left;">Browser( 浏览器进程)</td> <td>控制应用程序的“ chrome”部分，包括地址栏，书签，后退和前进按钮。 还处理Web浏览器中看不见的特权部分，例如网络请求和文件访问。浏览器进程负责与其他进程协调，起调度作用。</td></tr> <tr><td style="text-align:left;">Renderer(渲染进程)</td> <td>控制显示网站的标签内的所有内容。将 HTML、CSS、Javascript解析执行后生成图形显示在屏幕上。</td></tr> <tr><td style="text-align:left;">Plugin(插件进程)</td> <td>控制网站使用的所有插件，例如Flash。</td></tr> <tr><td style="text-align:left;">GPU</td> <td>与其他进程隔离处理GPU任务。由于GPU处理来自多个应用程序的请求并将它们绘制在同一表面上，因此将其分为不同的过程。</td></tr></tbody></table> <p>Chrome浏览器至少有上面四个进程。</p> <h2 id="浏览器的导航"><a href="#浏览器的导航" class="header-anchor">#</a> 浏览器的导航</h2> <p>经典面试题：在浏览器中输入URL到显示页面，中间发生了什么？</p> <ol><li>处理输入</li> <li>DNS 解析获得服务器的 ip 和端口</li> <li>进行网络请求获得网页</li> <li>浏览器下载解析，并渲染</li></ol> <h3 id="输入处理"><a href="#输入处理" class="header-anchor">#</a> 输入处理</h3> <p>在地址栏中输入内容（URL或者关键字）时，将由浏览器进程中的 UI 线程解析是否是 URL，若是 URL 则走通过 IPC 调起网络进程 进行 DNS 解析，网络请求等步骤，若是关键字，则发给默认的搜索引擎处理，返回搜索结果。</p> <h3 id="dns-解析"><a href="#dns-解析" class="header-anchor">#</a> DNS 解析</h3> <p>DNS是做什么？</p> <p>DNS 步骤</p> <h3 id="网络请求"><a href="#网络请求" class="header-anchor">#</a> 网络请求</h3> <h3 id="网页渲染流程"><a href="#网页渲染流程" class="header-anchor">#</a> 网页渲染流程</h3> <p><img src="/assets/img/image-20200922104712384.310ab32c.png" alt="image-20200922104712384"></p> <ol><li><h4 id="构建dom树"><a href="#构建dom树" class="header-anchor">#</a> 构建DOM树</h4> <p>HTML解析涉及到 <a href="https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList" target="_blank" rel="noopener noreferrer">tokenization<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和树的构造。HTML标记包括开始和结束标记，以及属性名和值。 如果文档格式良好，则解析它会简单而快速。解析器将标记化的输入解析到文档中，构建文档树。</p> <p>比如下面一段html 的代码：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>style.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
        Hello,<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>web performance<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>students
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx.jpg<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>上述代码生成的构造树大概是这样的：</p> <p><img src="/assets/img/image-20200922113304889.4dbb10aa.png" alt="image-20200922113304889"></p></li> <li><h4 id="构建cssom树"><a href="#构建cssom树" class="header-anchor">#</a> 构建CSSOM树</h4> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">p</span><span class="token punctuation">{</span><span class="token property">font-weight</span><span class="token punctuation">:</span>bold<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">span</span><span class="token punctuation">{</span><span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">img</span><span class="token punctuation">{</span><span class="token property">float</span><span class="token punctuation">:</span>right<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token selector">p span</span><span class="token punctuation">{</span><span class="token property">display</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="/assets/img/image-20200922115915366.d65c0964.png" alt="image-20200922115915366"></p></li> <li><h4 id="生成render-tree"><a href="#生成render-tree" class="header-anchor">#</a> 生成render tree</h4> <p><img src="/assets/img/image-20200922112239767.6afea15d.png" alt="image-20200922112239767"></p> <p>将DOM和CSSOM组合成一个Render树，计算样式树或渲染树从DOM树的根开始构建，遍历每个可见节点。</p> <p>像<code>&lt;head&gt;</code>和它的子节点以及任何具有<code>display: none</code>样式的结点，这些标签将不会显示，也就是它们不会出现在Render树上。具有<code>visibility: hidden</code>的节点会出现在Render树上，因为它们会占用空间。由于我们没有给出任何指令来覆盖用户代理默认值，因此上面代码示例中的script节点将不会包含在Render树中。</p> <p>渲染树标识显示哪些节点（即使不可见）及其计算样式，<strong>但不标识每个节点的尺寸或位置</strong>。</p></li> <li><h4 id="布局"><a href="#布局" class="header-anchor">#</a> 布局</h4> <p>布局是确定呈现树中所有节点的宽度、高度和位置，以及确定页面上每个对象的<strong>大小和位置</strong>的过程，浏览器从渲染树的根开始遍历它。回流是对页面的任何部分或整个文档的任何后续大小和位置的确定。</p> <p>**第一次确定节点的大小和位置称为布局。随后对节点大小和位置的重新计算称为回流（也叫重排）。**所以只要页面有动态交互，改变元素的位置，大小，就会产生回流。</p> <p>影响布局的 CSS 属性有：</p></li> <li><h4 id="绘制"><a href="#绘制" class="header-anchor">#</a> 绘制</h4> <p>生成布局树后，开始绘制。在绘制或光栅化阶段，浏览器将在布局阶段计算的每个框转换为屏幕上的实际像素。绘画包括将元素的每个可视部分绘制到屏幕上，<strong>包括文本、颜色、边框、阴影和替换的元素（如按钮和图像）</strong>。</p> <p><strong>第一次确定节点的文本，颜色，边框，阴影等外观属性称为绘制。随后对节点的外观属性重新计算称为重绘</strong>。</p> <p><strong>回流（重排）一定会引起重绘，所以开销比较大。重绘不会引起回流（重排），开销相对较少。</strong></p> <p>影响绘制的属性有：</p></li> <li><h4 id="合成"><a href="#合成" class="header-anchor">#</a> 合成</h4> <p>图层</p></li></ol> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>我们为什么需要知道浏览器工作原理？</p> <p>因为熟悉了浏览器工作原理，我们能更好的的进行性能优化。</p> <p>该如何进行性能优化，请看 <a href="/frontend-primitive/Web性能优化.html">Web 性能优化</a>。</p> <p>参考：</p> <p><a href="https://developers.google.com/web/updates/2018/09/inside-browser-part1" target="_blank" rel="noopener noreferrer">Google dev | 深入了解现代 Web 浏览器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Performance/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%B8%B2%E6%9F%93%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86" target="_blank" rel="noopener noreferrer">MDN|浏览器工作原理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <!----></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/frontend-primitive/ES6学习笔记.html" class="prev">
        ES6学习笔记
      </a></span> <span class="next"><a href="/frontend-primitive/DNS和CDN的区别和联系.html">
        DNS和 CDN 的区别和联系
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.32b47463.js" defer></script><script src="/assets/js/2.5de6ae78.js" defer></script><script src="/assets/js/1.b9497948.js" defer></script><script src="/assets/js/16.e7ad0e37.js" defer></script>
  </body>
</html>
